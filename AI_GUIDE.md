# AI_GUIDE.md

本ドキュメントは、このリポジトリにおける AI 向けルールの**正本**です。
AI はまずここを読み、判断に迷ったら本ドキュメントへ戻ってください。

## TL;DR

- AI向けルールの正本は `AI_GUIDE.md` のみ
- 理念層は推奨、規約層は必須
- 変更は小さく、雰囲気・静けさ・余白を優先する
- プレースホルダーや演出は意図があるため、無闇に埋めない
- コマンド実行は提案→承認。Claude/Copilot は各設定に従う

## 目的 / スコープ

- この UI は自己紹介の完成形ではなく、**入口（entry point）**として設計されている
- 情報量や機能追加より、**静けさ・余白・触感**のバランスを優先する
- AI の役割は、意図とバランスを崩さずに調整・実装・レビューを補助すること
- 技術スタックは静的サイト（HTML / CSS / 最小限の JS）、デプロイは Cloudflare Pages

## 理念層（推奨・判断軸）

- **主役の情報**: 丸いアバター画像と日本語名「わかどり」が主軸。英字名は控えめに扱う
- **情報の語り口**: テキストは活動や空気感を示す。説明しすぎない
- **リンク量**: 最小限（Illustration / Tech 程度）を好む
- **Front/Back**: 情報量の増加ではなく、視点の切替として扱う
- **演出の役割**: 3D/光沢/オーブ/影/半透明は意味がある。不要な削除はしない
- **余白・プレースホルダー**: 将来の余地として意図的。埋めない
- **迷ったときの判断**: gentler / quieter / less intrusive を選ぶ

## 規約層（必須ルール・禁止事項）

### 絶対にやらないこと（禁止事項）

- 勝手な仕様変更や機能追加
- 新しい AI 向け md の追加（正本は `AI_GUIDE.md`）
- 破壊的変更や大きなリファクタ（必要時は事前相談）

### 危険箇所 / 事前承認

以下は壊れやすい領域。変更する場合は**理由と影響範囲を説明し、承認を得ること**。

1. **Orb効果** (`style.css` `.wk-orb-*`) — 複数gradient/疑似要素の重ね合わせ
2. **フォーカス管理** (`app.js` `focusFirstInPanel`, `schedulePeekFocus`) — a11yの要
3. **inert処理** (`app.js` `updateInteractable`) — 旧ブラウザ対応含む
4. **3Dフリップ** (`style.css` `.wk-card-rotator`, `.wk-face`) — iOS WebKitハック有り

### diff提示と承認ルール

- **必ず diff を提示してから適用確認を取ること**
- 構造的な変更に迷いがある場合は事前に質問する
- 変更説明は簡潔に行う

### 変更の粒度

- 小さな調整を優先し、大きなリファクタは避ける
- 関係のないコードのリファクタはしない
- DOM 構造の変更は**明示的な指示がある場合のみ**
- デスクトップのレイアウトは変更しない

### モバイル変更のルール

- モバイル向けの変更はメディアクエリ内に限定する
- 目的は余白・サイズ・操作安全性の改善に留める
- レイアウトの再構成は避ける

### 作業フロー（調査 → 提案（diff） → 承認 → 実装 → 検証 → 提示）

1. 調査（現状把握）
2. 提案（diff）
3. 承認
4. 実装
5. 検証
6. 提示（diffと意図を共有）

### 品質ゲート（format / lint / test / build）

- 現状、専用の format / lint / test / build コマンドは未整備
- 新規導入や実行は**提案 → 承認**の順で行う

### アクセシビリティ / 振る舞い

- ブラウザのズームをグローバルに無効化しない
- 過度なタッチ/ジェスチャーブロックを避ける
- 修正は要素単位の最小限に留める

## 実行してよいコマンド（原則＋参照リンク）

- 原則: AIが勝手にコマンドを実行しない
- Claude: `.claude/settings.local.json` の許可範囲に従う
- Copilot: `.github/copilot-instructions.md` の指示に従う
- 追加実行は提案→承認

## 参照・導線

- README（人間向けの仕様メモ / 設計意図）: `README.md`
- Claude の入口: `CLAUDE.md`
- Copilot の入口: `.github/copilot-instructions.md`
